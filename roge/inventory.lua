local M = {}local pp = setmetatable({}, {__mode = "k"})local inventory           = {__index = function(self, key)            if key == "weight" then                local weight = 0                                 foreach(pp[self], function(v) if v.isItem then weight = v.weight end end)                return weight            else                return pp[self][key]            end    end}function inventory:addItem(item)    table.insert(pp[self], item)endlocal pp = setmetatable({}, {__mode = "k"})local item = {__index = function(self, key)        if(key == "isItem") then return true end        return pp[self][key]    end,    __newindex = function(self, key, value)        pp[self][key] = value    end,__call = function(self)        assert(pp[self].isactive, "item is not active")            pp[self](pp[self])    end}function createItem(name, description, weight, type)    local item = setmetatable({symbol = '$'}, item)    pp[item]   = {name = name, description = description, weight = weight, type = type}endlocal function createInventory(owner)    local inv = setmetatable({}, inventory)    pp[inv] = {owner = owner, items = {{name = "axe", description = "axe", weight = 1, type = "axe"}}    , innerKeys = {current = 0, count = 2},                                    keys = {}}    return invendlocal inv = createInventory()-- inv:addItem(createItem("axe", "old axe", 23, "axe"))function inv:show()    local ch    while ch ~= "Escape" do        local key = screen:showInventory(pp[self])        ch = controller:playerMove()    endendM.inv = inv-- inventory.items           = {axe = "axe description",                                 -- hammer = "hammer description"                                -- }-- inventory.innerKeys       = {current = 0, count = 2}-- inventory.keys            = {weight = 0, gold = 0}-- inventory.weight    = 0-- inventory.gold      = 0-- inventory.items     = {}-- itemTable = {name = "", description = "", weight = 0, type = "" }-- function inventory:show()    -- screen:showInventory(inventory)    -- ch = controller:playerMove()        -- while(ch ~= "Escape") do        -- if(ch == "DownArrow") then            -- inventory.innerKeys.current = inventory.innerKeys.current + 1            -- if(inventory.innerKeys.current > inventory.innerKeys.count-1) then inventory.innerKeys.current = 0 end            -- screen:showInventory(inventory)                    -- elseif ch == "UpArrow" then            -- inventory.innerKeys.current = inventory.innerKeys.current - 1            -- if(inventory.innerKeys.current < 0 ) then inventory.innerKeys.current = inventory.innerKeys.count - 1 end            -- screen:showInventory(inventory)                    -- else        -- end        -- ch = controller:playerMove()    -- end    -- end-- function showInventory()    -- screen:showInventory(inventory.items)    -- controller:playerMove()-- end-- print("chars")-- while true do    -- controller:playerMove()    -- screen:show(chars)-- endreturn M